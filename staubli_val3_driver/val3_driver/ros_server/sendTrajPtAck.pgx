<?xml version="1.0" encoding="utf-8" ?>
<Programs xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.staubli.com/robotics/VAL3/Program/2" >
  <Program name="sendTrajPtAck" access="public" >
    <Locals>
      <Local name="l_nRetVal" type="num" xsi:type="array" size="1" />
    </Locals>
    <Code><![CDATA[begin
  // send message length (prefix)
  call sendData(siTcpIpMotion,rosTrajPtAck.prefix.nData,nDataIn)
  // send message header (msg type, comm type, reply code)
  call sendData(siTcpIpMotion,rosTrajPtAck.header.nData,nDataIn)
  call sendData(siTcpIpMotion,rosTrajPtAck.body.nData,nDataIn)


  //  // send message length (prefix)
  //  l_nRetVal = sioSet(siTcpIpMotion, rosTrajPtAck.prefix.nData)
  //  if (l_nRetVal == -1)
  //    putln("10000: not connected")
  //    return
  //  elseIf (l_nRetVal < 4)
  //    popUpMsg("Error while sending prefix")
  //  endIf
  //
  //  nBytesSent = size(rosTrajPtAck.prefix.nData)
  //
  //  // send message header (msg type, comm type, reply code)
  //  l_nRetVal = sioSet(siTcpIpMotion, rosTrajPtAck.header.nData)
  //  if (l_nRetVal == -1)
  //    putln("10000: connection lost")
  //    return
  //  elseIf (l_nRetVal < 12)
  //    popUpMsg("Error while sending msg header")
  //  endIf
  //  
  //  nBytesSent = nBytesSent + size(rosTrajPtAck.header.nData)
  //  
  //  // send message body (data)
  //  // reply_code can only be = 1 (Success) or = 2 (Failure)
  //  if (rosTrajPtAck.header.nReplyCode == 2)
  //    l_nRetVal = sioSet(siTcpIpMotion, rosTrajPtAck.body.nData)
  //  elseIf (rosTrajPtAck.header.nReplyCode == 1)
  //    l_nRetVal = sioSet(siTcpIpMotion, rosTrajPtMsg.body.nData)
  //  endIf
  //  
  //  if (l_nRetVal == -1)
  //    putln("10000: connection lost")
  //    return
  //  elseIf (l_nRetVal < 52)
  //    popUpMsg("Error while sending msg body")
  //  endIf
  //  
  //  nBytesSent = nBytesSent + size(rosTrajPtAck.body.nData)
end]]></Code>
  </Program>
</Programs>